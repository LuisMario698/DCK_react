ANÁLISIS DE ENFOQUE Y LÍNEAS DE DISEÑO - SISTEMA CDK

Fecha: 4 de diciembre de 2025

1. Contexto del proyecto

CDK es una pequeña empresa que recolecta la basura generada en barcos pesqueros en Puerto Peñasco, Sonora. El sistema tiene como objetivo principal digitalizar el registro de los manifiestos de residuos, que hoy se llenan en papel, y facilitar:
- El registro de la cantidad de basura generada por cada embarcación.
- La firma (idealmente electrónica) de esos manifiestos.
- El registro/digitalización de los recibos del relleno sanitario (lugar a donde se lleva la basura recolectada).
- La consulta de estadísticas simples basadas en esos datos (por barco, por día, por rango de fechas, etc.).

El usuario principal es Don Francisco, una persona de alrededor de 55 años, no muy familiarizada con computadoras pero dispuesto a aprender. Esto implica que la prioridad absoluta del diseño es la simplicidad, claridad y reducción de fricción cognitiva: pocas opciones, muy visibles, con flujos lineales.

El código actual ya refleja un esfuerzo por construir algo moderno, limpio y escalable (Next.js, Supabase, diseño tipo glassmorphism, i18n, separación de servicios y componentes), pero a veces se percibe como más "enredoso" de lo necesario para el caso de uso.


2. Enfoque técnico actual (resumen rápido del código)

Tecnologías principales:
- Next.js 16 con rutas en `app/` y soporte para internacionalización mediante `next-intl`.
- React con componentes funcionales, hooks y separación clara entre UI y lógica de datos.
- Supabase como backend/BD, con servicios separados en `lib/services/*.ts`.
- Tipado con TypeScript (`types/` contiene modelos de dominio: embarcación, persona, manifiesto, etc.).
- Sistema de diseño documentado (glassmorphism refinado) en `DESIGN_SYSTEM.md`.

Estructura general:
- `app/[locale]/page.tsx`: redirige directamente a `/[locale]/dashboard`, es decir, la experiencia principal es el dashboard.
- `app/[locale]/dashboard/`: contiene las vistas principales (dashboard, asociaciones, embarcaciones, manifiestos, personas, simple/basurón, etc.).
- `components/layout/`: define el `DashboardLayout`, el `Sidebar`, `Header`, etc.
- `components/simple/`: agrupa flujos simplificados, incluyendo `SimpleBasuronForm.tsx`.
- `components/manifiestos/`, `components/embarcaciones/`, `components/personas/`: CRUDs y formularios específicos.
- `lib/services/`: capa de acceso a datos para buques, personas, manifiestos, etc.
- `lib/utils/pdfGenerator*.ts`: lógica para generación de PDFs de manifiestos.

Esto indica un enfoque de:
- Arquitectura modular y escalable.
- Separación de capas: UI / layout / datos / utilidades.
- Soporte multilenguaje desde el inicio.


3. Filosofía de diseño ya definida en el código

El documento `DESIGN_SYSTEM.md` define un lenguaje visual claro basado en:
- Glassmorphism (paneles semitransparentes, blur, bordes blancos suaves).
- Paleta neutra (grises) + azul como color de acción.
- Tipografía jerarquizada (H1–H4, body, small) con tamaños y pesos bien definidos.
- Componentes core:
  - Sidebar con pastilla de selección y animaciones suaves.
  - Modales blancos con overlay difuminado.
  - Contenedores tipo "cristal" para secciones principales.
  - Tarjetas blancas con borde y hover ligero.
  - Botones primarios azules y secundarios grises.
  - Paginación muy compacta y discreta.
- Patrones de interacción claros: hovers sutiles, estados de focus accesibles, loaders, skeletons.
- Sistema de espaciado y layout consistente (multiplicadores de 4px, paddings estándar, breakpoints definidos).
- Animaciones cortas (150–200 ms) para transiciones suaves.

En resumen, el diseño apunta a un dashboard moderno, elegante y consistente, pensado para escalar a más módulos, no solo para una pantalla simple.


4. Análisis de las vistas actuales (alto nivel)

4.1. Dashboard principal (`app/[locale]/dashboard/page.tsx`)

- Obtiene datos clave: buques, personas y manifiestos de basurón.
- Muestra tarjetas de estadísticas rápidas (total de buques, total de personas) con iconos (`Icons.Ship`, `Icons.Users`).
- Usa un layout con `grid` y tarjetas blancas, coherente con el diseño.
- Tiene sección inferior de contenido general (titulo/subtitulo) que se puede usar como introducción o atajo a flujos importantes.

Enfoque: vista de resumen global, minimalista y limpia. Buena base para, en el futuro, mostrar gráficas de manifiestos, tendencia de basura recolectada, etc.

4.2. Layout del dashboard (`components/layout/DashboardLayout.tsx`)

- Implementa el layout principal con `Sidebar` fijo a la izquierda y `Header` arriba.
- Aplica fondo gris claro en toda la pantalla.
- Envuelve el `main` en un contenedor con `transition-opacity` para hacer fade in/out al cambiar de ruta.
- Maneja un `transitionStage` (`fadeIn`/`fadeOut`) dependiente de `pathname`, para sensación más fluida al navegar.
- Estructura: Sidebar + Header + Contenido, muy típica de apps administrativas modernas.

Enfoque: experiencia de aplicación web "seria", ordenada, preparada para añadir muchas secciones en el tiempo, manteniendo consistencia visual.

4.3. Vista "simple" para basurón (`components/simple/SimpleBasuronForm.tsx`)

Este componente es clave porque representa uno de los flujos principales que usará Don Francisco.

Características principales:
- `use client`: es un formulario interactivo (cliente puro) con estado local.
- Carga la lista de buques (`getBuques`) desde Supabase al montar.
- Mantiene estado de formulario (`formData`) con:
  - fecha
  - hora de entrada
  - hora de salida
  - buque seleccionado
  - peso de entrada
  - peso de salida
  - nombre de usuario (quién registró)
  - observaciones
- Calcula el `totalDepositado` como diferencia entre peso de entrada y salida (si es positiva).
- Valida mínimo: que haya embarcación seleccionada y peso de entrada > 0.
- Al guardar, llama a `createManifiestoBasuron` mapeando los campos a la BD.
- Muestra un modal de éxito con animación (overlay + check verde + total depositado) y luego llama a `onSuccess`.

Diseño visual y estructura del formulario:
- Contenedor blanco con `rounded-xl` y `shadow-lg`.
- Encabezado verde (emerald) con icono y texto "Registro de Basurón".
- Contenido organizado en **tres columnas** dentro de un `grid` de 12 columnas:
  1. Columna 1 (4 columnas):
     - Paso 1: Embarcación.
     - Buscador de embarcación por texto.
     - Lista scrollable de buques, con estado de selección (borde lateral verde si seleccionado).
     - Campos de fecha y hora de entrada.
  2. Columna 2 (4 columnas):
     - Paso 2: Pesaje.
     - Tarjeta para peso de entrada (amarilla/ámbar) con input grande y botones rápidos (500 kg, 1T, 2T).
     - Tarjeta para peso de salida (azul) con input y hora de salida.
     - Banda de "TOTAL DEPOSITADO" que muestra los kg calculados.
  3. Columna 3 (4 columnas):
     - Paso 3: Confirmar.
     - Resumen de embarcación seleccionada.
     - Resumen mini de pesos (entrada/salida).
     - Campo "Registrado por" (nombre usuario).
     - Campo "Observaciones".
     - Botón grande verde de "GUARDAR" con loading spinner.

Enfoque de interacción:
- Claramente se busca una experiencia guiada por pasos, con números grandes (1, 2, 3) y colores funcionales (verde, ámbar, azul, morado) para separar mentalmente las secciones.
- El formulario intenta ser "simple" respecto al resto de vistas, pero sigue siendo visualmente denso: tres columnas, varios campos por columna, tarjetas, colores distintos, etc.


5. Línea de diseño que se está siguiendo

A partir de todo lo anterior, el enfoque de diseño actual puede resumirse así:

- **Arquitectura tipo dashboard administrativo**:
  - Sidebar lateral con navegación entre módulos (embarcaciones, personas, manifiestos, versión simple, etc.).
  - Header superior con título, idioma, y posiblemente usuario.
  - Contenido central compuesto por tarjetas, tablas y formularios.

- **Estética moderna con glassmorphism**:
  - Uso intensivo de fondos semitransparentes, blur, bordes blancos.
  - Tarjetas blancas sobre fondos suaves.
  - Colores bien pensados (azul para acción, verde para éxito, gris para base).

- **Enfoque en escalabilidad futura**:
  - Separación clara por dominios: `embarcaciones`, `personas`, `manifiestos`, `simple`, `ui`.
  - Servicios de datos desacoplados en `lib/services`.
  - Typescript con tipos de dominio en `types/`.
  - Estructura `app/[locale]/dashboard/...` lista para crecer.

- **Interacciones cuidadas**:
  - Transiciones de opacidad al cambiar de pantalla.
  - Modales de feedback claros.
  - Botones con estados de carga.

En general, el diseño está orientado a una **aplicación administrativa moderna, flexible y escalable**, más que a un "terminal de trabajo hiper simple".


6. Desajuste con la necesidad real de Don Francisco

Aunque el diseño es elegante y consistente, para el usuario principal (una sola persona, con baja experiencia tecnológica, y con una tarea muy específica y repetitiva) es posible que:

- El dashboard con muchas secciones y navegación lateral le resulte más complicado de lo necesario.
- El formulario de basurón, aun siendo "simple" a nivel código, se vea visualmente cargado:
  - Tres columnas simultáneas.
  - Muchos colores distintos (verde, ámbar, azul, morado, gris).
  - Varios bloques con bordes y tarjetas.
- Los conceptos de glassmorphism, transparencias y blur son bonitos, pero no necesariamente aportan claridad extra a alguien que solo quiere capturar datos rápido.
- La internacionalización y la capacidad de múltiples vistas están bien para el futuro, pero hoy agregan estructura y archivos que no aportan directamente a la facilidad de uso de Don Francisco.

En resumen: el sistema está mejor preparado para crecer y verse "premium" que para ser extremadamente directo y casi "aplicación de un solo propósito".


7. Propuesta de enfoque de diseño centrado en Don Francisco

Partiendo de lo ya construido, se puede ajustar la idea de diseño para que cumpla con:
- Modernidad, limpieza y elegancia.
- Máxima practicidad y simplicidad.
- Escalabilidad futura.
- Adaptación a un usuario mayor y poco experto.

7.1. Idea general de la aplicación

En lugar de pensar en un gran dashboard con muchos módulos desde el inicio, pensar en **dos vistas principales muy claras**:

1) "Registrar manifiesto de basura" (flujo principal, 80–90% del uso).
2) "Consultar y estadísticas" (para ver qué se ha hecho y generar reportes simples).

El resto (registro de embarcaciones, personas, tipos, etc.) puede quedar como secciones secundarias, accesibles pero no en la primera línea de navegación.

Para Don Francisco, la experiencia ideal sería:
- Encender la computadora.
- Abrir el sistema.
- Ver un **único botón grande** o menú muy claro que diga "Registrar manifiesto".
- Llenar un formulario en 2–3 pasos máximo, siempre en pantalla completa, con pocas distracciones.
- Al guardar, ver un mensaje claro de éxito y, si es necesario, poder generar/imprimir el PDF o pasar al siguiente manifiesto.

7.2. Replanteo de la vista principal

En lugar de un dashboard lleno de tarjetas, se sugiere que la página inicial (para el usuario CDK) sea algo como:

- Título grande: "Sistema de Manifiestos CDK".
- Subtítulo pequeño: "Registro de basura generada en embarcaciones".
- Dos botones grandes tipo "card":
  - "Registrar manifiesto" (botón principal, azul/verde, ocupa casi toda la anchura en mobile).
  - "Ver registros y estadísticas" (botón secundario).

El sidebar puede mantenerse para escalabilidad, pero podría:
- Estar oculto por defecto.
- O ser muy mínimo (3–4 opciones máximo).

7.3. Replanteo del formulario de basurón (SimpleBasuronForm)

Objetivo: que Don Francisco no tenga que "entender" una columna de Embarcación, otra de Pesaje y otra de Confirmación todas al mismo tiempo.

Propuesta de simplificación visual (sin cambiar mucho la lógica de negocio):

- Usar un **wizard de dos o tres pasos** en pantalla completa, con un solo bloque activo a la vez:

  Paso 1 – Embarcación y fecha/hora:
  - Campo de búsqueda y lista de buques.
  - Fecha y hora de entrada.
  - Botón grande: "Siguiente".

  Paso 2 – Pesaje:
  - Peso de entrada (input grande, con botones rápidos).
  - Peso de salida (opcional en el momento, o dejarlo para un flujo de "cerrar manifiesto" si la operación tiene inicio/fin separados).
  - Hora de salida (si aplica en el mismo flujo).
  - Mostrar en pequeño el cálculo del total depositado.
  - Botón grande: "Siguiente".

  Paso 3 – Confirmar y guardar:
  - Resumen: embarcación, fecha, hora(s), pesos.
  - Campo "Registrado por" prellenado si se quiere (por ejemplo, Don Francisco fijo o último valor usado).
  - Observaciones.
  - Botón grande: "GUARDAR".

- En vez de tres columnas, usar un layout **de una sola columna** en mobile/tablet y máximo dos en desktop, pero manteniendo la idea de flujo lineal.
- Reducir la cantidad de colores simultáneos: mantener el verde/azul como colores principales, y usar grises para el resto.
- Mantener las micro-interacciones suaves, pero evitar demasiado "chrome" visual que distraiga.

7.4. Firma electrónica

El proyecto ya incluye un `SignaturePad` en `components/ui`, lo que indica que se está pensando en firmas digitales.

Flujo sugerido:
- Al final del registro del manifiesto, mostrar un paso opcional (o un modal) de "Firmar manifiesto":
  - Área grande para dibujar firma en un pad (con mouse o pantalla táctil).
  - Botón de "Borrar" y "Guardar firma".
  - Guardar la firma como imagen asociada al manifiesto.
  - Integrar esa imagen en el PDF del manifiesto (los utilitarios de `pdfGenerator` pueden ya estar preparados para esto o se pueden adaptar).

De esta forma, Don Francisco ve el flujo como:
- Seleccionar barco.
- Poner pesos.
- Confirmar.
- Firmar (si está listo para firmar ya).

7.5. Digitalización de recibos del relleno sanitario

Segundo formulario clave:
- Fecha.
- Número de recibo.
- Peso total que se llevó.
- Relación con uno o varios manifiestos (opcional; se puede empezar sin esta relación para simplificar).
- Imagen/foto del recibo (subida de archivo o captura si se usa tablet/móvil).

Diseño recomendado:
- Mismo estilo que el formulario de manifiestos, pero aún más simple.
- Una sola columna, pocos campos.
- Posibilidad de escanear o tomar foto e inmediatamente ver miniatura.

7.6. Vista de estadísticas

Para no abrumar, empezar con una vista muy simple:
- Filtros básicos:
  - Rango de fechas.
  - Embarcación (opcional).
- Métricas mostradas:
  - Total de basura recolectada en el periodo.
  - Número de manifiestos.
  - Promedio por barco o por día.
- Una tabla simple debajo con los manifiestos listados.

Visualmente:
- Una sección arriba con tarjetas (como en el dashboard actual) pero solo 2–3.
- Debajo, tabla limpia con botones de exportación/impresión (si se usan).


8. Cómo conectar esto con el código actual

El proyecto ya tiene casi todo lo necesario:
- Servicios para buques, personas, manifiestos.
- Tipos para embarcaciones, manifiestos, etc.
- Componentes de layout y diseño coherentes.
- Formularios relativamente completos.

Lo que hace falta es **reordenar la experiencia** y simplificar la presentación:

1) Replantear la `DashboardPage` principal:
   - En vez de centrarse en estadísticas globales primero, hacer que el foco sea "Registrar manifiesto".
   - Mantener las tarjetas como algo secundario o en una pestaña de "Estadísticas".

2) Crear una versión aún más enfocada del flujo simple:
   - Reutilizar la lógica de `SimpleBasuronForm` pero reorganizando su UI en pasos sucesivos.
   - Reducir los colores a 1–2 principales.

3) Esconder complejidad para el usuario principal:
   - Mantener el resto de módulos (gestión de personas, asociaciones, etc.) en el sidebar o en una sección de "Configuración" que Don Francisco casi no necesite tocar.

4) Actualizar textos y microcopys:
   - Usar lenguaje muy directo, en español, con frases como "Paso 1 de 3", "Siguiente", "Atrás", "Listo".
   - Mensajes de error claros ("Selecciona una embarcación" en lugar de alert genérico).


9. Resumen del enfoque recomendado

- Mantener la **base técnica** (Next.js, Supabase, TypeScript, diseño documentado) porque es sólida y escalable.
- Ajustar la **experiencia de usuario** para que:
  - El flujo de registro de manifiesto sea lo primero y más fácil de encontrar.
  - El formulario se vea más lineal y menos "panel de control".
  - Se reduzca la sobrecarga visual (menos columnas y menos colores simultáneos).
- Planear las vistas en tres grandes bloques:
  1. **Registro de manifiestos** (con posible firma electrónica).
  2. **Recibos del relleno sanitario** (digitalización sencilla).
  3. **Estadísticas y consulta** (tarjetas y tabla con filtros).

Con esto se respeta tu objetivo de un sistema moderno, limpio, elegante y muy práctico, pero al mismo tiempo se aterriza a una experiencia centrada en Don Francisco, que es quien va a usarlo todos los días.

FIN DEL DOCUMENTO
